# =====================================================================
# DomD guest configuration
# =====================================================================

seclabel='system_u:system_r:domD_t'

# Guest name
name = "DomD"

# Kernel image to boot
kernel = "/usr/lib/xen/boot/linux-domd"

device_tree = "/usr/lib/xen/boot/domd.dtb"

extra = "root=/dev/STORAGE_PART2 rw rootwait console=hvc0 clk_ignore_unused pci=pcie_bus_perf"

# Initial memory allocation (MB)
memory = 1024

# Number of VCPUS
vcpus = 4

# Uncomment this lines and add "/pmu_a76" node to
# dt_passthrough_nodes to enable PMU feature. 
# NOTE: this feature is not security supported:
# see https://xenbits.xen.org/xsa/advisory-163.html.
# It's not recommended to use it for production builds
# but it may be used for development or debugging.
# cpus = ["0", "1", "2", "3"]
# vpmu = 1

on_crash = 'preserve'

tee = "optee"

# This is autogenerated config part

dt_compatible = [ "renesas,spider-breakout", "renesas,spider-cpu", "renesas,r8a779f0" ]

# Clocks and regulators are needed and are in the device tree root,
# but we do not want to copy all root nodes: handle these one by one
dt_passthrough_nodes = [
    "/extal",
    "/extalr",
    "/msiof-ref-clock",
    "/ufs30_refclk_v",
    "/pcie_bus",
    "/scif",
    "/soc",
    "/regulator-1p8v",
    "/regulator-3p3v",
    "/reserved-memory",
]

dtdev = [
    "/soc/dma-controller@e7350000",
    "/soc/dma-controller@e7351000",
    "/soc/mmc@ee140000",
    "/soc/ethernet@e68c0000",
    "/soc/pcie@e65d0000",
    "/soc/scsi@e6860000",
]

irqs = [
# gpio@e6050180
    854,
# gpio@e6050980
    855,
# gpio@e6051180
    856,
# gpio@e6051980
    857,
# i2c@e6500000
    270,
# i2c@e66d8000
    274,
# serial@e6550000
    278,
# serial@e6e60000
    281,
# serial@e6c50000 - used by Xen
#    284,
# dma-controller@e7350000
    133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149,
# dma-controller@e7351000
    151, 158, 157, 152, 179, 180, 181, 182, 183, 184, 185, 186, 155, 156, 154, 153, 159,
# mmc@ee140000
    268,
# dma-controller@ffd60000
    64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 61, 62, 63,
# dma-controller@ffd61000
    79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95,
# dma-controller@ffd62000
    97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113,
# dma-controller@ffd63000
    128, 129, 130, 131, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127,
# pcie@e65d0000
    448, 449, 450, 451, 452, 453, 454,
# mfis@e6260000
    352,
# iccom01
    354,
# iccom02
    356,
# iccom03
    358,
# iccom04
    360,
# iccom05
    362,
# iccom06
    364,
# iccom07
    366,
# iccom016
    386,
# iccom017
    388,
# iccom018
    390,
# iccom019
    392,
# iccom020
    394,
# iccom021
    396,
# iccom022
    398,
# iccom023
    400,
# ethernet@e68c0000
    312, 313, 314, 315, 316, 317, 318, 319, 320, 321,
    322, 323, 324, 325, 326, 327, 328, 329, 330, 331,
# scsi@e6860000 (UFS)
    267,
]

iomem = [
#watchdog@e6020000
    "e6020,1",
#pin-controller@e6050000
#pin-controller@e6050000
#gpio@e6050180
#gpio@e6050980
    "e6050,1",
#pin-controller@e6050000
#pin-controller@e6050000
#gpio@e6051180
#gpio@e6051980
    "e6051,1",
#pin-controller@e6050000
#pin-controller@e6050000
    "dfd90,1",
#pin-controller@e6050000
#pin-controller@e6050000
    "dfd91,1",
#clock-controller@e6150000
    "e6150,4",
#reset-controller@e6160000
    "e6160,4",
#system-controller@e6180000
    "e6180,4",
#i2c@e6500000
    "e6500,1",
#i2c@e66d8000
    "e66d8,1",
#ethernet@e68c0000
    "e68c0,20",
#ethernet@e68c0000
    "e6444,3",
#serial@e6550000
    "e6550,1",
#serial@e6e60000
    "e6e60,1",
#serial@e6c50000 - used by Xen
#    "e6c50,1",
#dma-controller@e7350000
    "e7350,1",
#dma-controller@e7350000
    "e7300,10",
#dma-controller@e7351000
    "e7351,1",
#dma-controller@e7351000
    "e7310,10",
#mmc@ee140000
    "ee140,2",
#interrupt-controller@f1000000 - used by Xen
#    "f1000,20",
#interrupt-controller@f1000000 - used by Xen
#    "f1060,110",
#chipid@fff00044
    "fff00,1",
#dma-controller@ffd60000
    "ffd60,1",
#dma-controller@ffd60000
    "ffc10,10",
#dma-controller@ffd61000
    "ffd61,1",
#dma-controller@ffd61000
    "ffc20,10",
#dma-controller@ffd62000
    "ffd62,1",
#dma-controller@ffd62000
    "ffd70,10",
#dma-controller@ffd63000
    "ffd63,1",
#dma-controller@ffd63000
    "ffd80,10",
#pcie@e65d0000 - trapped by vPCI code: "dbi"
#    "e65d0,3",
#pcie@e65d0000
    "e65d3,2",
#pcie@e65d0000
    "e65d5,2",
#pcie@e65d0000
    "e65d6,1",
#pcie@e65d0000
    "e65d7,1",
#pcie@e65d0000 - trapped by vPCI code: "config"
#    "fe000,10",
#thermal@e6198000
    "e6198,1",
    "e61a0,1",
    "e61a8,1",
    "e61b0,1",
#mfis@e6260000
#iccom01
#iccom02
#iccom03
#iccom04
#iccom05
#iccom06
#iccom07
#iccom08
#iccom09
#iccom010
#iccom011
#iccom012
#iccom013
#iccom014
#iccom015
#iccom100
#iccom101
#iccom102
#iccom103
#iccom104
#iccom105
#iccom106
#iccom107
#iccom108
#iccom109
#iccom110
#iccom111
#iccom112
#iccom113
#iccom114
#iccom115
    "e6260,10",
#iccom shared memory (CTA) - CR52
    "47fc7,2@37fc7",
#scsi@e6860000 (UFS)
    "e6860,1",
    "e6078,1",
]

# End of autogenerated config part
